---
- hosts: EXAM  
  become: yes
  become_user: root 
  vars:
    ansible_python_interpreter: /usr/bin/python3
  tasks:
  - name: test connection
    ping:
  - name: install Pip     
    apt: name=python-pip state=present
  - name: install docker-py
    pip: name=docker-py

  - name: build the image
    docker_image: 
      name: websiteExam
      path: /DevOps/Examen/Jenkins/workspace/ExamPip/Project_API2/ClientApp
      state: build
  - name: Running the container
    docker_container:
      image: websiteExam:latest
      path: /DevOps/Examen/Jenkins/workspace/ExamPip/Project_API2/ClientApp
      state: running

  # - name: install epel-release
  #   yum:
  #     name: epel-release
  #     state: latest